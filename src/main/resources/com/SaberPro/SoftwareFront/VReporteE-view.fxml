<?xml version="1.0" encoding="UTF-8"?>
<?import org.controlsfx.control.RangeSlider?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<VBox prefHeight="600.0" prefWidth="900.0" spacing="20.0"
      xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.SaberPro.SoftwareFront.Controllers.VReporteEController">
    <stylesheets>
        <URL value="@../../../CSS/Carga.css" />
    </stylesheets>

    <padding>
        <Insets top="20" right="20" bottom="20" left="20" />
    </padding>

    <!-- Botón para mostrar/ocultar filtros -->
    <Button fx:id="btnToggleFilters" text="Mostrar Filtros" onAction="#toggleFilters" />

    <!-- Sección de filtros -->
    <VBox fx:id="filtersSection" spacing="15" visible="false" managed="false">

        <GridPane hgap="10" vgap="10">
            <!-- Documento -->
            <Label text="Documento:" GridPane.rowIndex="0" GridPane.columnIndex="0" />
            <TextField fx:id="txtDocumento" promptText="Documento" GridPane.rowIndex="0" GridPane.columnIndex="1" />

            <!-- Año -->
            <Label text="Año:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
            <ComboBox fx:id="cmbAnio" promptText="Año" GridPane.rowIndex="1" GridPane.columnIndex="1" />

            <!-- Periodo -->
            <Label text="Periodo:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
            <ComboBox fx:id="cmbPeriodo" promptText="Periodo" GridPane.rowIndex="2" GridPane.columnIndex="1" />

            <!-- Rango de puntaje global -->
            <Label text="Puntaje Global:" GridPane.rowIndex="3" GridPane.columnIndex="0" />
            <VBox GridPane.rowIndex="3" GridPane.columnIndex="1">
                <RangeSlider fx:id="rangeSliderPuntajeGlobal" min="0" max="200" showTickLabels="true" showTickMarks="true" />
                <HBox spacing="10">
                    <Label text="Mín:" />
                    <TextField fx:id="txtPuntajeGlobalMin" promptText="Mín" prefWidth="50" />
                    <Label text="Máx:" />
                    <TextField fx:id="txtPuntajeGlobalMax" promptText="Máx" prefWidth="50" />
                </HBox>
            </VBox>

            <!-- Rango de puntaje por módulo -->
            <Label text="Puntaje Módulo:" GridPane.rowIndex="4" GridPane.columnIndex="0" />
            <VBox GridPane.rowIndex="4" GridPane.columnIndex="1">
                <RangeSlider fx:id="rangeSliderPuntajeModulo" min="0" max="200" showTickLabels="true" showTickMarks="true" />
                <HBox spacing="10">
                    <Label text="Mín:" />
                    <TextField fx:id="txtPuntajeModuloMin" promptText="Mín" prefWidth="50" />
                    <Label text="Máx:" />
                    <TextField fx:id="txtPuntajeModuloMax" promptText="Máx" prefWidth="50" />
                </HBox>
            </VBox>

            <!-- Tipo de Módulo -->
            <Label text="Tipo de Módulo:" GridPane.rowIndex="5" GridPane.columnIndex="0" />
            <VBox fx:id="tipoModuloCheckboxes" GridPane.rowIndex="5" GridPane.columnIndex="1" spacing="5">
                <Label text="Seleccione los módulos:" />
                <!-- Checkboxes se añaden dinámicamente desde el controlador -->
            </VBox>
        </GridPane>

        <Button fx:id="btnAplicarFiltros" text="Aplicar Filtros" onAction="#aplicarFiltros" />
    </VBox>

    <Separator />

    <!-- Tabla de reportes -->
    <TableView fx:id="tablaReportes" prefHeight="600" prefWidth="850" style="-fx-padding: 20px;">
        <columns>
            <TableColumn fx:id="colDocumento" prefWidth="120" text="Documento" />
            <TableColumn fx:id="colNombre" prefWidth="150" text="Nombre" />
            <TableColumn fx:id="colRegistro" prefWidth="100" text="N° Registro" />
            <TableColumn fx:id="colAnio" prefWidth="70" text="Año" />
            <TableColumn fx:id="colPeriodo" prefWidth="50" text="Periodo" />
            <TableColumn fx:id="colNombrePrograma" prefWidth="150" text="Nombre Programa" />
            <TableColumn fx:id="colGrupoDeReferencia" prefWidth="150" text="Grupo de Referencia" />
            <TableColumn fx:id="colPuntajeGlobal" prefWidth="120" text="Puntaje Global" />
            <TableColumn fx:id="colDesempeno" prefWidth="150" text="Desempeño" />
            <TableColumn fx:id="colPercentilGlobal" prefWidth="120" text="Percentil Global" />
            <TableColumn fx:id="colTipoModulo" prefWidth="150" text="Tipo de Módulo" />
            <TableColumn fx:id="colPuntajeModulo" prefWidth="120" text="Puntaje Módulo" />
            <TableColumn fx:id="colPercentilModulo" prefWidth="120" text="Percentil Módulo" />
            <TableColumn fx:id="colNovedades" prefWidth="150" text="Novedades" />
        </columns>
    </TableView>
</VBox>